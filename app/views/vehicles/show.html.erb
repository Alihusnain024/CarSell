<div class="single-vehicle-container">
  <div class="single-vehicle">
    <h1><%= @vehicle.carModel %></h1>
    <h1><span>PKR:</span> <%= @vehicle.price %></h1>
  </div>
</div>
<div class='vehicle-details'>
  <div class="left">
    <div class="left-wrapper">
    <div class="left-container">
  <div id="imageCarousel" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <% @vehicle.vehicle_image.each_with_index do |image, index| %>
        <li data-target="#imageCarousel" data-slide-to="<%= index %>" <%= index.zero? ? 'class="active"' : '' %>></li>
      <% end %>
    </ol>
    <div class="carousel-inner">
      <% @vehicle.vehicle_image.each_with_index do |image, index| %>
        <div class="carousel-item <%= index.zero? ? 'active' : '' %>">
          <%= image_tag image, size: '450x350', class: 'd-block w-100' %>
        </div>
      <% end %>
    </div>
    <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

      <div class="phone-wrapper">
        <button class="btn btn-primary" id="showPhoneBtn">
          <i class="fas fa-phone"></i> Show Phone
        </button>
        <button class="btn btn-success">
          <i class="fas fa-envelope"></i> Send Message
          </button>
      </div>
    </div>
  </div>
  <div class="right">
    <div class="right-container">
      <div class='right-row'>
        <p>Car Model<p/>
        <p> <%=@vehicle.carModel %></p>
      </div>
      <hr>
      <div class='right-row'>
        <p>Assembly<p/>
        <p> <%=@vehicle.assemblyType %></p>
      </div>
      <hr>
      <div class='right-row'>
        <p>Engine Detail<p/>
        <p> <%=@vehicle.engineType %></p>
      </div>
      <hr>
      <div class='right-row'>
        <p>Engine Capaicty<p/>
        <p> <%=@vehicle.engineCapicity %></p>
      </div>
      <hr>
      <div class='right-row'>
        <p>Mileage<p/>
        <p> <%=@vehicle.mileage %></p>
      </div>
      <hr>
      <div class='right-row'>
        <p>Transmission Type<p/>
        <p> <%=@vehicle.transmissonType %></p>
      </div>
      <hr>
      <div class='right-row'>
        <p>Car Model<p/>
        <p> <%=@vehicle.carModel %></p>
      </div>
      <hr>
    </div>
  </div>
</div>
<div class="phone-number" style="display: none;"><%= @vehicle.primaryContact %></div>

<script>
  document.addEventListener("turbolinks:load", function() {
    const phoneNumber = document.querySelector(".phone-number");
    const showPhoneBtn = document.getElementById("showPhoneBtn");

    showPhoneBtn.addEventListener("click", function() {
      const phoneNumberText = phoneNumber.textContent;
      const phoneNumberModal = document.getElementById("phoneNumber");
      phoneNumberModal.textContent = phoneNumberText;

      $('#phoneModal').modal('show');
    });
  });
</script>

<div class="modal fade" id="phoneModal" tabindex="-1" role="dialog" aria-labelledby="phoneModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="phoneModalLabel">Phone Number</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p id="phoneNumber"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
